

<br/>
<br/>
<br/>
<br/>
<div class="container">

    <div class="row">
        <aside class="col-md-4 sidebar sidebar-left">

            <div class="row widget">
                <div class="col-xs-12">
                    <h4>Lorem ipsum dolor sit</h4>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere, ratione delectus reiciendis nulla nisi pariatur molestias animi eos repellat? Vel.</p>
                </div>
            </div>
            <div class="row widget">
                <div class="col-xs-12">
                    <h4>Lorem ipsum dolor sit</h4>
                    <p><img src="assets/images/1.jpg" alt="">
                    </p>
                </div>
            </div>
            <div class="row widget">
                <div class="col-xs-12">
                    <h4>Lorem ipsum dolor sit</h4>
                    <p><img src="assets/images/2.jpg" alt="">
                    </p>
                    <p>Qui, debitis, ad, neque reprehenderit laborum soluta dolor voluptate eligendi enim consequuntur eveniet recusandae rerum? Atque eos corporis provident tenetur.</p>
                </div>
            </div>

            <button class="btn btn-default" onclick="addChart()">Add chart</button>

        </aside>

        <article class="col-md-8 maincontent" id="current_chart">
            
        </article>

    </div>
</div>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script>
    google.load('visualization', '1.0', { packages: ['charteditor'] });
    var wrapper = new Object();
    var chartId = 1;

    function drawVisualization() {
        wrapper = new google.visualization.ChartWrapper({
        	chartType: 'LineChart',
            dataTable: [],
            containerId: 'editorChart'
        });

    }
    
    function addChart() {
        $.get('/Profile/CreateChart', { chartId: chartId })
            .done(function(data) {
                $('#current_chart').html(data);
                drawVisualization();
            });
    }

    function parseString(str, withQuotes) {
    	var find = '\'';
    	var pattern = new RegExp(find, 'g');
    	str = str.replace(pattern, '\"');
    	var re = /(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g;
    	var res = [], arr = null;
    	while (arr = re.exec(str)) {
    		if (withQuotes)
    			res.push(arr[0]);
    		else
    			res.push(arr[1] ? arr[1] : arr[0]);
    	}
    	return res;
    }

    Array.prototype.clean = function (deleteValue) {
    	for (var i = 0; i < this.length; i++) {
    		if (this[i] == deleteValue) {
    			this.splice(i, 1);
    			i--;
    		}
    	}
    	return this;
    };

    function parseData() {
    	var data = $('#chartData').val();
    	var lines = data.split('\n').clean("");
    	var chartData = [];
    	for (var i = 0; i < lines.length; i++) {
    		var line = [];
    		var params = [];
    		var items = parseString(lines[i]);
    		for (var j = 0; j < items.length; j++) {
    			var f = parseFloat(items[j]);
    			if (f)
    				params.push(f);
    			else {
    				params.push(items[j]);
    			}
    		}
    		chartData.push(line.concat(params));
    	}
    	wrapper.setDataTable(chartData);
    }

    function render() {
    	var height = $('#chartHeight').val();
    	var width = $('#chartWidth').val();

    	$('#editorChart').width(width);
    	$('#editorChart').height(height);

    	parseData();
    	wrapper.draw();
    }
</script>